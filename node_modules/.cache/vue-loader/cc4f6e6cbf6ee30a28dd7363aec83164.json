{"remainingRequest":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Podio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Podio.vue","mtime":1619059787627},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlc3RvcmUgZnJvbSAiQC9zZXJ2aWNlcy9maXJlc3RvcmUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAganVlZ286IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0SnVlZ28sCiAgICAgIGZpbmFsaXN0YXM6IFtdLAogICAgICBoaXN0b3JpYWw6IFtdCiAgICB9OwogIH0sCiAgYmVmb3JlTW91bnQ6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgbGV0IGZpbmFsaXN0YXMgPSB0aGlzLmp1ZWdvLmNvbmR1Y3RvcmVzLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZS5wb3NpdGlvbiA8IDQpOwoKICAgIGZpbmFsaXN0YXMuc29ydCgoYSwgYikgPT4gewogICAgICBpZiAoYS5wb3NpdGlvbiA+IGIucG9zaXRpb24pIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICBpZiAoYS5wb3NpdGlvbiA8IGIucG9zaXRpb24pIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9KTsKCiAgICB0aGlzLmZpbmFsaXN0YXMgPSBmaW5hbGlzdGFzLm1hcCh2YWx1ZSA9PiB7CiAgICAgIHJldHVybiB7IG5hbWU6IHZhbHVlLmp1Z2Fkb3Iubm9tYnJlLCBwb3M6IHZhbHVlLnBvc2l0aW9uIH07CiAgICB9KTsKICAgIHRyeSB7CiAgICAgIC8vR3VhcmRhciBwb2RpbwogICAgICBhd2FpdCBmaXJlc3RvcmUKICAgICAgICAuZG9jKHRoaXMuanVlZ28uaWQudG9TdHJpbmcoKSkKICAgICAgICAuc2V0KHsgZmluYWxpc3RhczogdGhpcy5maW5hbGlzdGFzIH0pOwoKICAgICAgLy9PYnRlbmVyIHBvZGlvCiAgICAgIGxldCBoaXN0b3JpYWwgPSBhd2FpdCBmaXJlc3RvcmUuZ2V0KCk7CiAgICAgIGxldCBfZGF0YSA9IFtdOwogICAgICBoaXN0b3JpYWwuZm9yRWFjaCh2YWx1ZSA9PiBfZGF0YS5wdXNoKHZhbHVlLmRhdGEoKS5maW5hbGlzdGFzKSk7CiAgICAgIC8vZmlsdHJhciBoaXN0b3JpYWwKICAgICAgbGV0IF9saXN0ID0gW107CiAgICAgIF9kYXRhLmZvckVhY2godmFsdWUgPT4gewogICAgICAgIHZhbHVlLm1hcCh2ID0+IHYubmFtZSkuZm9yRWFjaChfdiA9PiBfbGlzdC5wdXNoKF92KSk7CiAgICAgIH0pOwogICAgICBsZXQgc2V0RGF0YSA9IG5ldyBTZXQoX2xpc3QpOwogICAgICBzZXREYXRhLmZvckVhY2godmFsdWUgPT4gewogICAgICAgIGNvbnN0IG51bSA9IF9saXN0LmZpbHRlcihlbCA9PiBlbCA9PT0gdmFsdWUpLmxlbmd0aDsKICAgICAgICB0aGlzLmhpc3RvcmlhbC5wdXNoKHsgbmFtZTogdmFsdWUsIHJlcGVhdDogbnVtIH0pOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Podio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Podio.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"pug\">\n  section.Podio\n    router-link(:to=\"{name:'Home'}\") Ir al INICIO\n    h1 Podio de los finalistas\n    section.podio\n      ol\n        li(\n          v-for=\"finalista,key in finalistas\"\n          :key=\"key\"\n        ) {{finalista.name}} en la posici√≥n {{finalista.pos}}\n    section.historial\n      h2 Historial del podio\n      table\n        tr\n          th Jugador\n          th Repeticiones en el podio\n        tr(\n          v-for=\"_historial, key in historial\"\n          :key=\"key\"\n        )\n          td {{_historial.name}}\n          td {{_historial.repeat}}\n</template>\n\n<script>\nimport firestore from \"@/services/firestore\";\n\nexport default {\n  data: function() {\n    return {\n      juego: this.$store.getters.getJuego,\n      finalistas: [],\n      historial: []\n    };\n  },\n  beforeMount: async function() {\n    let finalistas = this.juego.conductores.filter(value => value.position < 4);\n\n    finalistas.sort((a, b) => {\n      if (a.position > b.position) {\n        return 1;\n      }\n      if (a.position < b.position) {\n        return -1;\n      }\n      return 0;\n    });\n\n    this.finalistas = finalistas.map(value => {\n      return { name: value.jugador.nombre, pos: value.position };\n    });\n    try {\n      //Guardar podio\n      await firestore\n        .doc(this.juego.id.toString())\n        .set({ finalistas: this.finalistas });\n\n      //Obtener podio\n      let historial = await firestore.get();\n      let _data = [];\n      historial.forEach(value => _data.push(value.data().finalistas));\n      //filtrar historial\n      let _list = [];\n      _data.forEach(value => {\n        value.map(v => v.name).forEach(_v => _list.push(_v));\n      });\n      let setData = new Set(_list);\n      setData.forEach(value => {\n        const num = _list.filter(el => el === value).length;\n        this.historial.push({ name: value, repeat: num });\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.Podio \n  display flex\n  flex-direction column\n  align-items center\n\n  li\n    margin 10px\n\n  .historial\n    td, th\n      padding 5px\n      background-color #46df7e30\n    th\n      background-color #46df7e70\n</style>"]}]}