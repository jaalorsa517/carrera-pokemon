{"remainingRequest":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Podio.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Podio.vue","mtime":1619059787627},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5Qb2RpbyAKICBkaXNwbGF5IGZsZXgKICBmbGV4LWRpcmVjdGlvbiBjb2x1bW4KICBhbGlnbi1pdGVtcyBjZW50ZXIKCiAgbGkKICAgIG1hcmdpbiAxMHB4CgogIC5oaXN0b3JpYWwKICAgIHRkLCB0aAogICAgICBwYWRkaW5nIDVweAogICAgICBiYWNrZ3JvdW5kLWNvbG9yICM0NmRmN2UzMAogICAgdGgKICAgICAgYmFja2dyb3VuZC1jb2xvciAjNDZkZjdlNzAK"},{"version":3,"sources":["Podio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Podio.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"pug\">\n  section.Podio\n    router-link(:to=\"{name:'Home'}\") Ir al INICIO\n    h1 Podio de los finalistas\n    section.podio\n      ol\n        li(\n          v-for=\"finalista,key in finalistas\"\n          :key=\"key\"\n        ) {{finalista.name}} en la posici√≥n {{finalista.pos}}\n    section.historial\n      h2 Historial del podio\n      table\n        tr\n          th Jugador\n          th Repeticiones en el podio\n        tr(\n          v-for=\"_historial, key in historial\"\n          :key=\"key\"\n        )\n          td {{_historial.name}}\n          td {{_historial.repeat}}\n</template>\n\n<script>\nimport firestore from \"@/services/firestore\";\n\nexport default {\n  data: function() {\n    return {\n      juego: this.$store.getters.getJuego,\n      finalistas: [],\n      historial: []\n    };\n  },\n  beforeMount: async function() {\n    let finalistas = this.juego.conductores.filter(value => value.position < 4);\n\n    finalistas.sort((a, b) => {\n      if (a.position > b.position) {\n        return 1;\n      }\n      if (a.position < b.position) {\n        return -1;\n      }\n      return 0;\n    });\n\n    this.finalistas = finalistas.map(value => {\n      return { name: value.jugador.nombre, pos: value.position };\n    });\n    try {\n      //Guardar podio\n      await firestore\n        .doc(this.juego.id.toString())\n        .set({ finalistas: this.finalistas });\n\n      //Obtener podio\n      let historial = await firestore.get();\n      let _data = [];\n      historial.forEach(value => _data.push(value.data().finalistas));\n      //filtrar historial\n      let _list = [];\n      _data.forEach(value => {\n        value.map(v => v.name).forEach(_v => _list.push(_v));\n      });\n      let setData = new Set(_list);\n      setData.forEach(value => {\n        const num = _list.filter(el => el === value).length;\n        this.historial.push({ name: value, repeat: num });\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.Podio \n  display flex\n  flex-direction column\n  align-items center\n\n  li\n    margin 10px\n\n  .historial\n    td, th\n      padding 5px\n      background-color #46df7e30\n    th\n      background-color #46df7e70\n</style>"]}]}