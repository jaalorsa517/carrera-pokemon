{"remainingRequest":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Juego.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/src/views/Juego.vue","mtime":1619041940519},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jaalorsa/Proyectos/softka/juego_de_carros_por_consola_-_grupo_b/carros_js/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnZXROdW1iZXJSYW5kb20gZnJvbSAiQC91dGlscy9yYW5kb20iOwppbXBvcnQgSnVlZ28gZnJvbSAiQC9tb2RlbHMvSnVlZ28iOwppbXBvcnQgUGlzdGEgZnJvbSAiQC9tb2RlbHMvUGlzdGEiOwppbXBvcnQgQ2Fycm8gZnJvbSAiQC9tb2RlbHMvQ2Fycm8iOwppbXBvcnQgQ29uZHVjdG9yIGZyb20gIkAvbW9kZWxzL0NvbmR1Y3RvciI7CmltcG9ydCBKdWdhZG9yIGZyb20gIkAvbW9kZWxzL0p1Z2Fkb3IiOwppbXBvcnQgQ2FycmlsIGZyb20gIkAvbW9kZWxzL0NhcnJpbCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBqdWVnbzogdW5kZWZpbmVkLAogICAgICBjdXJyZW50SnVnYWRvcjogMCwKICAgICAgcG9zaXRpb246IDEsCiAgICAgIHJlc3VsdERhZG86IDAsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIHN0eWxlc0NhcnJvOiBbCiAgICAgICAgeyAibWFyZ2luLWxlZnQiOiAiMCIgfSwKICAgICAgICB7ICJtYXJnaW4tbGVmdCI6ICIwIiB9LAogICAgICAgIHsgIm1hcmdpbi1sZWZ0IjogIjAiIH0sCiAgICAgICAgeyAibWFyZ2luLWxlZnQiOiAiMCIgfSwKICAgICAgICB7ICJtYXJnaW4tbGVmdCI6ICIwIiB9CiAgICAgIF0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0UG9rZW1vbnM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucG9rZW1vbnM7CiAgICB9LAogICAgZ2V0Q29uZHVjdG9yZXM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5qdWVnby5jb25kdWN0b3JlczsKICAgIH0sCiAgICBnZXRDb25kdWN0b3I6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRDb25kdWN0b3Jlc1t0aGlzLmN1cnJlbnRKdWdhZG9yXTsKICAgIH0sCiAgICBnZXRKdWdhZG9yOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29uZHVjdG9yLmp1Z2Fkb3I7CiAgICB9LAogICAgZ2V0Q2Fycm86IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRDb25kdWN0b3IuY2Fycm87CiAgICB9LAogICAgZ2V0QXZhbmNlOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICgKICAgICAgICAodGhpcy5nZXRDYXJyby5kaXN0YW5jaWEgKiAxMDApIC8gKHRoaXMuZ2V0Q2Fycm8uY2FycmlsLmxvbmdpdHVkICogMTAwMCkKICAgICAgKTsKICAgIH0sCiAgICBtc2dMb2c6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5nZXRDb25kdWN0b3IucG9zaXRpb24gPT09IDApIHsKICAgICAgICByZXR1cm4gYEp1Z2Fkb3IgJHt0aGlzLmdldEp1Z2Fkb3Iubm9tYnJlfSBhdmFuesOzICR7dGhpcy5yZXN1bHREYWRvfSBtZXRyb3NgOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgSnVnYWRvciAke3RoaXMuZ2V0SnVnYWRvci5ub21icmV9IHRlcm1pbsOzIGxhIGNhcnJlcmFgOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcG9zaXRpb246IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZSA+IDUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEp1ZWdvIiwgdGhpcy5qdWVnbyk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiUG9kaW8iIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblRocm93OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuZ2V0Q29uZHVjdG9yLnBvc2l0aW9uID09PSAwKSB7CiAgICAgICAgdGhpcy5yZXN1bHREYWRvID0gdGhpcy5nZXRDb25kdWN0b3IudGlyYXJEYWRvKCkgKiAxMDA7CiAgICAgICAgdGhpcy5nZXRDYXJyby5hdmFuemFyKHRoaXMucmVzdWx0RGFkbyk7CiAgICAgICAgdGhpcy5uZXdQKCk7CgogICAgICAgIGlmICgKICAgICAgICAgICh0aGlzLmdldENhcnJvLmRpc3RhbmNpYSAvIDEwMDAgPj0gdGhpcy5nZXRDYXJyby5jYXJyaWwubG9uZ2l0dWQpIHwKICAgICAgICAgICh0aGlzLmdldEF2YW5jZSArIHRoaXMuZ2V0Q2Fycm8uZGlzdGFuY2lhID49CiAgICAgICAgICAgIHRoaXMuZ2V0Q2Fycm8uY2FycmlsLmxvbmdpdHVkICogMTAwMCkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuc3R5bGVzQ2Fycm9bdGhpcy5jdXJyZW50SnVnYWRvcl1bIm1hcmdpbi1sZWZ0Il0gPSBgOTAlYDsKCiAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiA8PSA1KSB7CiAgICAgICAgICAgIHRoaXMuZ2V0Q29uZHVjdG9yLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjsKICAgICAgICAgICAgdGhpcy5wb3NpdGlvbisrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN0eWxlc0NhcnJvW3RoaXMuY3VycmVudEp1Z2Fkb3JdWwogICAgICAgICAgICAibWFyZ2luLWxlZnQiCiAgICAgICAgICBdID0gYCR7dGhpcy5nZXRBdmFuY2V9JWA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubmV3UCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5jdXJyZW50SnVnYWRvciA8IHRoaXMuZ2V0Q29uZHVjdG9yZXMubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuY3VycmVudEp1Z2Fkb3IrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRKdWdhZG9yID0gMDsKICAgICAgfQogICAgfSwKICAgIG5ld1A6IGZ1bmN0aW9uKCkgewogICAgICAvL0NyZWFyIHVuIG51ZXZvIHBhcnJhZm8geSBzZSBhZ3JlZ2EgYWwgZmluYWwgZGVsIGxvZwogICAgICBsZXQgbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpOwogICAgICBsb2cuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5tc2dMb2cpKTsKICAgICAgdGhpcy4kcmVmcy5sb2cuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIiwgbG9nKTsKICAgICAgLy8gdGhpcy4kcmVmcy5sb2cuYXBwZW5kQ2hpbGQobG9nKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgLy9DcmVhciBqdWdhZG9yZXMgaHVtYW5vcwoKICAgIGNvbnN0IHBsYXllcnMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5wbGF5ZXJzOwogICAgbGV0IGp1Z2Fkb3JlcyA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGp1Z2Fkb3Jlcy5wdXNoKG5ldyBKdWdhZG9yKGksIHBsYXllcnNbaV0ubmFtZS50b1VwcGVyQ2FzZSgpLCAiaHVtYW5vIikpOwogICAgfQogICAgLy9DcmVhciBqdWdhZG9yZXMgbWFxdWluYQogICAgZm9yIChsZXQgaSA9IGp1Z2Fkb3Jlcy5sZW5ndGg7IGkgPCA1OyBpKyspIHsKICAgICAganVnYWRvcmVzLnB1c2goCiAgICAgICAgbmV3IEp1Z2Fkb3IoaSwgdGhpcy5nZXRQb2tlbW9uc1tpXS5uYW1lLnRvVXBwZXJDYXNlKCksICJtYXF1aW5hIikKICAgICAgKTsKICAgIH0KCiAgICAvL1Bpc3RhcwogICAgY29uc3QgdHJhY2tzID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRUcmFjazsKICAgIGxldCBhdXggPSBbXTsKICAgIHN3aXRjaCAodHJhY2tzKSB7CiAgICAgIGNhc2UgIkNvcnRhIjoKICAgICAgICAvL0lkID0gMSwgTm9tYnJlIHBpc3RhID0gQ29ydGEsIGxvbmdpdHVkIDFLbQogICAgICAgIGF1eCA9IFsxLCAiQ29ydGEiLCAxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiTGFyZ2EiOgogICAgICAgIC8vSWQgPSAyLCBOb21icmUgcGlzdGEgPSBMYXJnYSwgbG9uZ2l0dWQgMTBLbQogICAgICAgIGF1eCA9IFsyLCAiTGFyZ2EiLCAxMF07CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgY29uc3QgcGlzdGFzID0gW25ldyBQaXN0YShhdXhbMF0sIGF1eFsxXSwgYXV4WzJdKV07CgogICAgLy9DcmVhciBjYXJyaWxlcywgY2Fycm9zIHkgY29uZHVjdG9yZXMKICAgIGxldCBjb25kdWN0b3JlcyA9IFtdOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwganVnYWRvcmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBjYXJyaWwgPSBuZXcgQ2FycmlsKHBpc3Rhc1swXS5saW1pdGUpOwogICAgICBwaXN0YXNbMF0uYWRkQ2FycmlsKGNhcnJpbCk7CiAgICAgIGxldCBjYXJybyA9IG5ldyBDYXJybyhjYXJyaWwpOwogICAgICBjb25kdWN0b3Jlcy5wdXNoKG5ldyBDb25kdWN0b3IoanVnYWRvcmVzW2ldLCBjYXJybykpOwogICAgfQoKICAgIGxldCBpZEdhbWUgPSBnZXROdW1iZXJSYW5kb20oMTAwMDAwMDAsIDEwMDAwMDApOwogICAgbGV0IGp1ZWdvID0gbmV3IEp1ZWdvKGlkR2FtZSk7CiAgICBqdWVnby5waXN0YXMgPSBwaXN0YXM7CiAgICBqdWVnby5jb25kdWN0b3JlcyA9IGNvbmR1Y3RvcmVzOwogICAgdGhpcy5qdWVnbyA9IGp1ZWdvOwogIH0KfTsK"},{"version":3,"sources":["Juego.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Juego.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"pug\">\n  section.juego\n    h1 Carreras de autos\n    .juego-container\n      .pista\n        .carril(\n          v-for=\"carril,index in getConductores\"\n          :key=\"index\"\n        )\n          img.carro(\n            :src=\"getPokemons[index].img\" \n            :alt=\"getPokemons[index].name\"\n            :style=\"stylesCarro[index]\"\n            ref=\"carro\"\n            )\n      button(@click=\"onThrow\") Jugar\n    h2 Registros\n    .info-container(ref=\"log\")\n</template>\n\n<script>\nimport getNumberRandom from \"@/utils/random\";\nimport Juego from \"@/models/Juego\";\nimport Pista from \"@/models/Pista\";\nimport Carro from \"@/models/Carro\";\nimport Conductor from \"@/models/Conductor\";\nimport Jugador from \"@/models/Jugador\";\nimport Carril from \"@/models/Carril\";\n\nexport default {\n  data: function() {\n    return {\n      juego: undefined,\n      currentJugador: 0,\n      position: 1,\n      resultDado: 0,\n      showModal: false,\n      stylesCarro: [\n        { \"margin-left\": \"0\" },\n        { \"margin-left\": \"0\" },\n        { \"margin-left\": \"0\" },\n        { \"margin-left\": \"0\" },\n        { \"margin-left\": \"0\" }\n      ]\n    };\n  },\n  computed: {\n    getPokemons: function() {\n      return this.$store.state.pokemons;\n    },\n    getConductores: function() {\n      return this.juego.conductores;\n    },\n    getConductor: function() {\n      return this.getConductores[this.currentJugador];\n    },\n    getJugador: function() {\n      return this.getConductor.jugador;\n    },\n    getCarro: function() {\n      return this.getConductor.carro;\n    },\n    getAvance: function() {\n      return (\n        (this.getCarro.distancia * 100) / (this.getCarro.carril.longitud * 1000)\n      );\n    },\n    msgLog: function() {\n      if (this.getConductor.position === 0) {\n        return `Jugador ${this.getJugador.nombre} avanzó ${this.resultDado} metros`;\n      } else {\n        return `Jugador ${this.getJugador.nombre} terminó la carrera`;\n      }\n    }\n  },\n  watch: {\n    position: function(newValue) {\n      if (newValue > 5) {\n        this.$store.commit(\"setJuego\", this.juego);\n        this.$router.push({ name: \"Podio\" });\n      }\n    }\n  },\n  methods: {\n    onThrow: function() {\n      if (this.getConductor.position === 0) {\n        this.resultDado = this.getConductor.tirarDado() * 100;\n        this.getCarro.avanzar(this.resultDado);\n        this.newP();\n\n        if (\n          (this.getCarro.distancia / 1000 >= this.getCarro.carril.longitud) |\n          (this.getAvance + this.getCarro.distancia >=\n            this.getCarro.carril.longitud * 1000)\n        ) {\n          this.stylesCarro[this.currentJugador][\"margin-left\"] = `90%`;\n\n          if (this.position <= 5) {\n            this.getConductor.position = this.position;\n            this.position++;\n          }\n        } else {\n          this.stylesCarro[this.currentJugador][\n            \"margin-left\"\n          ] = `${this.getAvance}%`;\n        }\n      } else {\n        this.newP();\n      }\n\n      if (this.currentJugador < this.getConductores.length - 1) {\n        this.currentJugador++;\n      } else {\n        this.currentJugador = 0;\n      }\n    },\n    newP: function() {\n      //Crear un nuevo parrafo y se agrega al final del log\n      let log = document.createElement(\"p\");\n      log.appendChild(document.createTextNode(this.msgLog));\n      this.$refs.log.insertAdjacentElement(\"afterbegin\", log);\n      // this.$refs.log.appendChild(log);\n    }\n  },\n  created: function() {\n    //Crear jugadores humanos\n\n    const players = this.$store.state.players;\n    let jugadores = [];\n    for (let i = 0; i < players.length; i++) {\n      jugadores.push(new Jugador(i, players[i].name.toUpperCase(), \"humano\"));\n    }\n    //Crear jugadores maquina\n    for (let i = jugadores.length; i < 5; i++) {\n      jugadores.push(\n        new Jugador(i, this.getPokemons[i].name.toUpperCase(), \"maquina\")\n      );\n    }\n\n    //Pistas\n    const tracks = this.$store.getters.getTrack;\n    let aux = [];\n    switch (tracks) {\n      case \"Corta\":\n        //Id = 1, Nombre pista = Corta, longitud 1Km\n        aux = [1, \"Corta\", 1];\n        break;\n      case \"Larga\":\n        //Id = 2, Nombre pista = Larga, longitud 10Km\n        aux = [2, \"Larga\", 10];\n        break;\n    }\n\n    const pistas = [new Pista(aux[0], aux[1], aux[2])];\n\n    //Crear carriles, carros y conductores\n    let conductores = [];\n\n    for (let i = 0; i < jugadores.length; i++) {\n      let carril = new Carril(pistas[0].limite);\n      pistas[0].addCarril(carril);\n      let carro = new Carro(carril);\n      conductores.push(new Conductor(jugadores[i], carro));\n    }\n\n    let idGame = getNumberRandom(10000000, 1000000);\n    let juego = new Juego(idGame);\n    juego.pistas = pistas;\n    juego.conductores = conductores;\n    this.juego = juego;\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.juego\n  .juego-container\n    width  95vw\n    height auto\n    position relative\n  .pista\n    width 100%\n    height auto\n    position relative\n  .carril\n    width 100%\n    margin 15px 0\n    display flex\n    background-color green\n  .carro\n    width  50px\n    height 50px\n\n  .info-container\n    width  95vw\n    height 25vh\n    overflow auto\n</style>\n"]}]}